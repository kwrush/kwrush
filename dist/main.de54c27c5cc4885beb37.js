!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="dist/",n(n.s=4)}([function(e,t){e.exports=THREE},function(e,t,n){(function(e,n){!function(t){"use strict";function r(e){var t=h.indexOf(e);-1<t&&h.splice(t,1),h.push(e),v=0,p&&!d&&(s=m(w),d=!0)}function i(e){for(var t=0;t<h.length;t++)if(e===h[t])return h[t];return null}function o(){return d}function a(){return _}var s,u="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:this||(void 0!==t?t:{}),c=u.requestAnimationFrame||function(e){return u.setTimeout(e,50/3)},l=u.cancelAnimationFrame||function(e){return u.clearTimeout(e)},f=function(){if(void 0===n||void 0===n.hrtime||n.versions&&void 0!==n.versions.electron){if(void 0!==u.performance&&void 0!==u.performance.now)return u.performance.now.bind(u.performance);var e=u.performance&&u.performance.timing&&u.performance.timing.navigationStart?u.performance.timing.navigationStart:Date.now();return function(){return Date.now()-e}}return function(){var e=n.hrtime();return 1e3*e[0]+e[1]/1e6}}(),h=[],d=!1,p=!1,y=[],m=c,v=0,g=120,_=!0,b=function(e){var t=h.indexOf(e);-1!==t&&h.splice(t,1),0===h.length&&(l(s),d=!1)},w=function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:f(),n=1<arguments.length?arguments[1]:void 0;if(g<=v&&_)return d=!1,v=0,l(s),!1;p&&d?s=m(e):function(){for(var e=0;e<y.length;e++)y[e]()}(),h.length||v++;for(var r=0,i=h.length;r<i;)h[r++].update(t,n),i>h.length&&r--,i=h.length;return!0},T={},E={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return Math.pow(e,2)},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*Math.pow(e,2):-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return Math.pow(e,3)},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*Math.pow(e,3):.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return Math.pow(e,4)},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*Math.pow(e,4):-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return Math.pow(e,5)},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*Math.pow(e,5):.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)},Out:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin(5*(e-.1)*Math.PI)+1},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?-.5*Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)+1}},Back:{In:function(e){return e*e*(2.70158*e-1.70158)},Out:function(e){return--e*e*(2.70158*e+1.70158)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((1+t)*e-t)*.5:.5*((e-=2)*e*((1+t)*e+t)+2)}},Bounce:{In:function(e){return 1-E.Bounce.Out(1-e)},Out:function(e){var t=2.75,n=7.5625;return e<1/t?n*e*e:e<2/t?n*(e-=1.5/t)*e+.75:e<2.5/t?n*(e-=2.25/t)*e+.9375:n*(e-=2.625/t)*e+.984375},InOut:function(e){return e<.5?.5*E.Bounce.In(2*e):.5*E.Bounce.Out(2*e-1)+.5}},Stepped:{steps:function(e){return function(t){return(t*e|0)/e}}}};function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t,n){return t&&S(e.prototype,t),n&&S(e,n),e}function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){var r,i,o;r=e,o=n[i=t],i in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?z(e):t}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var R=50/3,I="_chainedTweens",C="Callback",F="update",B="complete",N="start",V="repeat",G="reverse",q="restart",H="STRING_PROP",W=/\s+|([A-Za-z?().,{}:""[\]#%]+)|([-+]=+)?([-+]+)?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]=?\d+)?/g;function U(e){if(e&&e.nodeType||void 0===e||"object"!==M(e))return e;if(Array.isArray(e))return[].concat(e);if("object"!==M(e))return e;var t={};for(var n in e)t[n]=U(e[n]);return t}var Y=function(e){return isNaN(+e)||("+"===e[0]||"-"===e[0])&&"="===e[1]||""===e||" "===e},X=/^#([0-9a-f]{6}|[0-9a-f]{3})$/gi,Q=function(e,t){var n,r,i;3===t.length&&(t=(n=t[0])+n+(r=t[1])+r+(i=t[2])+i);var o=parseInt(t,16);return"rgb("+(n=o>>16&255)+", "+(r=o>>8&255)+", "+(i=255&o)+")"};function K(e){if(e&&e.splice&&e.isString)return e;if("string"!=typeof e)return e;if("="===e.charAt(1))return e;var t=e.replace(X,Q).match(W).map((function(e){return Y(e)?e:+e}));return t.isString=!0,t}function Z(e,t,n,r){var i=n[e],o=r[e];if(i===o)return!0;if(Array.isArray(i)&&Array.isArray(o)&&i.length===o.length)for(var a=0,s=o.length;a<s;a++){var u=i[a],c=o[a];u===c||"number"==typeof u&&"number"==typeof c||Z(a,t[e],i,o)}if(!("number"==typeof i&&"number"==typeof o||i&&i.splice&&i.isString&&o&&o.splice&&o.isString)){if("string"==typeof i&&Array.isArray(o)){var l=K(i),f=o.map(K);return n[e]=l,r[e]=f,!0}if("string"==typeof i||"string"==typeof o){var h=Array.isArray(i)&&i[0]===H?i:K(i),d=Array.isArray(o)&&o[0]===H?o:K(o);if(void 0===h)return;for(var p=1;p<h.length;)h[p]===d[p]&&"string"==typeof h[p-1]?(h.splice(p-1,2,h[p-1]+h[p]),d.splice(p-1,2,d[p-1]+d[p])):p++;return h[p=0]===H&&h.shift(),d[0]===H&&d.shift(),n[e]=h,r[e]=d,!0}if("object"===M(i)&&"object"===M(o)){if(Array.isArray(i)&&!i.isString)return i.map((function(n,r){return Z(r,t[e],i,o)}));for(var y in o)Z(y,t[e],i,o);return!0}}return!1}var $="rgba(",J=function(e,t,n){var r=2<arguments.length&&void 0!==n?n:"rgb(";return"number"==typeof e[t]&&(e[t-1]===r||e[t-3]===r||e[t-5]===r)};function ee(e,t,n,r,i,o,a){var s=a?n:n[e],u=a?r:r[e];if(void 0===u)return s;if(void 0===s||"string"==typeof s||s===u)return u;if("object"===M(s)&&"object"===M(u)){if(!s||!u)return t[e];if("object"===M(s)&&s&&s.isString&&u&&u.splice&&u.isString){for(var c="",l=0,f=s.length;l<f;l++)if(s[l]!==u[l]||"number"!=typeof s[l]||"number"==typeof u[l]){var h="number"==typeof s[l]&&"string"==typeof u[l]&&"="===u[l][1],d="number"!=typeof s[l]?s[l]:h?s[l]+parseFloat(u[l][0]+u[l].substr(2))*i:s[l]+(u[l]-s[l])*i;(J(s,l)||J(s,l,$))&&(d|=0),c+=d,h&&1===o&&(s[l]=s[l]+parseFloat(u[l][0]+u[l].substr(2)))}else c+=s[l];return a||(t[e]=c),c}if(Array.isArray(s)&&s[0]!==H)for(var p=0,y=s.length;p<y;p++)s[p]!==u[p]&&"string"!=typeof t[e]&&ee(p,t[e],s,u,i,o);else if("object"===M(s)&&s&&!s.isString)for(var m in s)s[m]!==u[m]&&ee(m,t[e],s,u,i,o)}else if("number"==typeof s){var v="string"==typeof u;t[e]=v?s+parseFloat(u[0]+u.substr(2))*i:s+(u-s)*i,v&&1===o&&(n[e]=t[e])}else"function"==typeof u&&(t[e]=u(i));return t[e]}function te(e,t){var n=e[t],r=t.replace(oe,"").split(ie),i=r.length-1,o=Array.isArray(e),a="object"===M(e)&&!o;return a?(e[t]=null,delete e[t]):o&&e.splice(t,1),r.reduce((function(e,t,s){o&&"."!==t&&"["!==t&&(t*=1);var u="["===r[s+1];if("."===t||"["===t)return"."===t?o=!(a=!0):"["===t&&(o=!(a=!1)),e;if(void 0===e[t]){if(o||a)return e[t]=s===i?n:o||u?[]:a?{}:null,a=o=!1,e[t]}else if(void 0!==e[t])return s===i&&(e[t]=n),e[t];return e}),e)}function ne(e){if("object"===M(e)&&e)for(var t in e)if(-1!==t.indexOf(".")||-1!==t.indexOf("["))te(e,t);else if("object"===M(e[t])&&e[t]){var n=e[t];for(var r in n)if(-1!==r.indexOf(".")||-1!==r.indexOf("["))te(n,r);else if("object"===M(n[r])&&n[r]){var i=n[r];for(var o in i)-1===o.indexOf(".")&&-1===o.indexOf("[")||te(i,o)}}return e}var re,ie=/([.[])/g,oe=/\]/g,ae=Object.freeze({__proto__:null,FRAME_MS:R,TOO_LONG_FRAME_MS:250,CHAINED_TWEENS:I,EVENT_CALLBACK:C,EVENT_UPDATE:F,EVENT_COMPLETE:B,EVENT_START:N,EVENT_REPEAT:V,EVENT_REVERSE:G,EVENT_PAUSE:"pause",EVENT_PLAY:"play",EVENT_RESTART:q,EVENT_STOP:"stop",EVENT_SEEK:"seek",STRING_PROP:H,NUM_REGEX:W,deepCopy:U,decomposeString:K,decompose:Z,RGB:"rgb(",RGBA:$,isRGBColor:J,recompose:ee,SET_NESTED:ne}),se={Linear:function(e,t,n){var r=e.length-1,i=r*t,o=Math.floor(i),a=se.Utils.Linear;return t<0?a(e[0],e[1],i,n):1<t?a(e[r],e[r-1],r-i,n):a(e[o],e[r<o+1?r:o+1],i-o,n)},Bezier:function(e,t,n){for(var r=se.Utils.Reset(n),i=e.length-1,o=Math.pow,a=se.Utils.Bernstein,s=Array.isArray(r),u=0;u<=i;u++)if("number"==typeof r)r+=o(1-t,i-u)*o(t,u)*e[u]*a(i,u);else if(s)for(var c=0,l=r.length;c<l;c++)"number"==typeof r[c]?r[c]+=o(1-t,i-u)*o(t,u)*e[u][c]*a(i,u):r[c]=e[u][c];else if("object"===M(r))for(var f in r)"number"==typeof r[f]?r[f]+=o(1-t,i-u)*o(t,u)*e[u][f]*a(i,u):r[f]=e[u][f];else if("string"==typeof r){for(var h="",d=e[Math.round(i*t)],p=1,y=d.length;p<y;p++)h+=d[p];return h}return r},CatmullRom:function(e,t,n){var r=e.length-1,i=r*t,o=Math.floor(i),a=se.Utils.CatmullRom;return e[0]===e[r]?(t<0&&(o=Math.floor(i=r*(1+t))),a(e[(o-1+r)%r],e[o],e[(o+1)%r],e[(o+2)%r],i-o,n)):t<0?a(e[1],e[1],e[0],e[0],-t,n):1<t?a(e[r-1],e[r-1],e[r],e[r],(0|t)-t,n):a(e[o?o-1:0],e[o],e[r<o+1?r:o+1],e[r<o+2?r:o+2],i-o,n)},Utils:{Linear:function(e,t,n,r){if(e===t||"string"==typeof e){if(t.length&&t.splice&&t.isString){t="";for(var i=0,o=e.length;i<o;i++)t+=e[i]}return t}if("number"==typeof e)return"function"==typeof e?e(n):e+(t-e)*n;if("object"===M(e)){if(void 0!==e.length){var a="string"==typeof e[0]||e.isString;if(a||e[0]===H){for(var s="",u=a?0:1,c=e.length;u<c;u++){var l=0===n?e[u]:1!==n&&"number"==typeof e[u]?e[u]+(t[u]-e[u])*n:t[u];(0<n&&n<1&&J(e,u)||J(e,u,$))&&(l|=0),s+=l}return s}if(r&&r.length&&r.splice)for(var f=0,h=r.length;f<h;f++)r[f]=se.Utils.Linear(e[f],t[f],n,r[f])}else for(var d in r)r[d]=se.Utils.Linear(e[d],t[d],n,r[d]);return r}},Reset:function(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)e[t]=se.Utils.Reset(e[t]);return e}if("object"!==M(e))return"number"==typeof e?0:e;for(var r in e)e[r]=se.Utils.Reset(e[r]);return e},Bernstein:function(e,t){var n=se.Utils.Factorial;return n(e)/n(t)/n(e-t)},Factorial:(re=[1],function(e){var t=1;if(re[e])return re[e];for(var n=e;1<n;n--)t*=n;return re[e]=t}),CatmullRom:function(e,t,n,r,i,o){if("string"==typeof e)return t;if("number"==typeof e){var a=.5*(n-e),s=.5*(r-t),u=i*i;return(2*t-2*n+a+s)*(i*u)+(-3*t+3*n-2*a-s)*u+a*i+t}if("object"===M(e)){if(void 0!==e.length){if(e[0]===H){for(var c="",l=1,f=e.length;l<f;l++){var h="number"==typeof e[l]?se.Utils.CatmullRom(e[l],t[l],n[l],r[l],i):r[l];(J(e,l)||J(e,l,$))&&(h|=0),c+=h}return c}for(var d=0,p=o.length;d<p;d++)o[d]=se.Utils.CatmullRom(e[d],t[d],n[d],r[d],i,o[d])}else for(var y in o)o[y]=se.Utils.CatmullRom(e[y],t[y],n[y],r[y],i,o[y]);return o}}}},ue={};function ce(e,t,n){if(!e||!e.nodeType)return t;var r=e.queueID||"q_"+Date.now();e.queueID||(e.queueID=r);var i=ue[r];if(i){if(i.object===t&&e===i.tween.node&&n._startTime===i.tween._startTime)b(i.tween);else if("object"===M(t)&&t&&i.object){for(var o in t)o in i.object&&(n._startTime===i.tween._startTime?delete i.object[o]:i.propNormaliseRequired=!0);Object.assign(i.object,t)}return i.object}return"object"===M(t)&&t?(ue[r]={tween:n,object:t,propNormaliseRequired:!1},ue[r].object):t}function le(e,t,n){return t?e?"undefined"!=typeof window&&e===window||"undefined"!=typeof document&&e===document?[e]:"string"==typeof e?!!document.querySelectorAll&&document.querySelectorAll(e):Array.isArray(e)?e:e.nodeType?[e]:n?e:[]:null:e?"undefined"!=typeof window&&e===window||"undefined"!=typeof document&&e===document?e:"string"==typeof e?!!document.querySelector&&document.querySelector(e):Array.isArray(e)?e[0]:e.nodeType||n?e:null:null}var fe=0,he=E.Linear.None,de=function(){function e(t,n){return O(this,e),this.id=fe++,!t||"object"!==M(t)||n||t.nodeType?t&&(t.nodeType||t.length||"string"==typeof t)&&(t=this.node=le(t),n=this.object=ce(t,n,this)):(n=this.object=t,t=null),this._valuesEnd=null,this._valuesStart=Array.isArray(n)?[]:{},this._duration=1e3,this._easingFunction=he,this._easingReverse=he,this._interpolationFunction=se.Linear,this._startTime=0,this._initTime=0,this._delayTime=0,this._repeat=0,this._r=0,this._isPlaying=!1,this._yoyo=!1,this._reversed=!1,this._onStartCallbackFired=!1,this._pausedTime=null,this._isFinite=!0,this._maxListener=15,this._chainedTweensCount=0,this._prevTime=null,this}return j(e,null,[{key:"fromTo",value:function(t,n,r,i){var o=3<arguments.length&&void 0!==i?i:{};o.quickRender=o.quickRender?o.quickRender:!r;var a=new e(t,n).to(r,o);return o.quickRender&&(a.render().update(a._startTime),a._rendered=!1,a._onStartCallbackFired=!1),a}},{key:"to",value:function(t,n,r){return e.fromTo(t,null,n,r)}},{key:"from",value:function(t,n,r){return e.fromTo(t,n,null,r)}}]),j(e,[{key:"setMaxListener",value:function(e){var t=0<arguments.length&&void 0!==e?e:15;return this._maxListener=t,this}},{key:"on",value:function(e,t){for(var n=this._maxListener,r=e+C,i=0;i<n;i++){var o=r+i;if(!this[o]){this[o]=t;break}}return this}},{key:"once",value:function(e,t){for(var n=this,r=this._maxListener,i=e+C,o=function(e){var r=i+e;if(!n[r])return n[r]=function(){for(var e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];t.apply(n,i),n[r]=null},"break"},a=0;a<r&&"break"!==o(a);a++);return this}},{key:"off",value:function(e,t){for(var n=this._maxListener,r=e+C,i=0;i<n;i++){var o=r+i;this[o]===t&&(this[o]=null)}return this}},{key:"emit",value:function(e,t,n,r){var i=this._maxListener,o=e+C;if(!this[o+0])return this;for(var a=0;a<i;a++){var s=o+a;this[s]&&this[s](t,n,r)}return this}},{key:"isPlaying",value:function(){return this._isPlaying}},{key:"isStarted",value:function(){return this._onStartCallbackFired}},{key:"reverse",value:function(e){var t=this._reversed;return this._reversed=void 0!==e?e:!t,this}},{key:"reversed",value:function(){return this._reversed}},{key:"pause",value:function(){return this._isPlaying?(this._isPlaying=!1,b(this),this._pausedTime=f(),this.emit("pause",this.object)):this}},{key:"play",value:function(){return this._isPlaying?this:(this._isPlaying=!0,this._startTime+=f()-this._pausedTime,this._initTime=this._startTime,r(this),this._pausedTime=f(),this.emit("play",this.object))}},{key:"restart",value:function(){return this._repeat=this._r,this.reassignValues(),r(this),this.emit(q,this.object)}},{key:"seek",value:function(e,t){var n=this._duration,r=this._initTime,i=this._startTime,o=this._reversed,a=r+e;return this._isPlaying=!0,a<i&&r<=i&&(this._startTime-=n,this._reversed=!o),this.update(e,!1),this.emit("seek",e,this.object),t?this:this.pause()}},{key:"duration",value:function(e){return this._duration="function"==typeof e?e(this._duration):e,this}},{key:"to",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:1e3;if(this._valuesEnd=e,"number"==typeof n||"function"==typeof n)this._duration="function"==typeof n?n(this._duration):n;else if("object"===M(n))for(var r in n)if("function"==typeof this[r]){var i=x(Array.isArray(n[r])?n[r]:[n[r]],4),o=i[0],a=void 0===o?null:o,s=i[1],u=void 0===s?null:s,c=i[2],l=void 0===c?null:c,f=i[3],h=void 0===f?null:f;this[r](a,u,l,h)}return this}},{key:"render",value:function(){if(this._rendered)return this;var t=this._valuesStart,n=this._valuesEnd,r=this.object,i=this.node,o=this.InitialValues;if(ne(r),ne(n),i&&i.queueID&&ue[i.queueID]){var a=ue[i.queueID];if(a.propNormaliseRequired&&a.tween!==this){for(var s in n)a.tween._valuesEnd[s];a.normalisedProp=!0,a.propNormaliseRequired=!1}}if(i&&o&&(r&&0!==Object.keys(r).length?n&&0!==Object.keys(n).length||(n=this._valuesEnd=o(i,r)):r=this.object=ce(i,o(i,n),this)),!t.processed){for(var u in n){var c=r&&r[u]&&U(r[u]),l=n[u];if(!(T[u]&&T[u].init&&(T[u].init.call(this,c,l,u,r),void 0===c&&t[u]&&(c=t[u]),T[u].skipProcess)||"number"==typeof c&&isNaN(c)||null===c||null===l||!1===c||!1===l||void 0===c||void 0===l||c===l)){if(t[u]=c,Array.isArray(l))if(Array.isArray(c))l.isString&&r[u].isString&&!c.isString?c.isString=!0:Z(u,r,t,n);else{l.unshift(c);for(var f=0,h=l.length;f<h;f++)"string"==typeof l[f]&&(l[f]=K(l[f]))}else Z(u,r,t,n);"number"!=typeof c||"string"!=typeof l||l[1]}}t.processed=!0}return e.Renderer&&this.node&&e.Renderer.init&&(e.Renderer.init.call(this,r,t,n),this.__render=!0),this._rendered=!0,this}},{key:"start",value:function(e){return this._startTime=void 0!==e?"string"==typeof e?f()+parseFloat(e):e:f(),this._startTime+=this._delayTime,this._initTime=this._prevTime=this._startTime,this._onStartCallbackFired=!1,this._rendered=!1,this._isPlaying=!0,r(this),this}},{key:"stop",value:function(){var e=this._isPlaying,t=this._isFinite,n=this.object,r=this._startTime,i=this._duration,o=this._r,a=this._yoyo,s=this._reversed;if(!e)return this;var u=t?(o+1)%2==1:!s;return this._reversed=!1,a&&u?this.update(r):this.update(r+i),b(this),this.emit("stop",n)}},{key:"delay",value:function(e){return this._delayTime="function"==typeof e?e(this._delayTime):e,this}},{key:"chainedTweens",value:function(){if(this._chainedTweensCount=arguments.length,!this._chainedTweensCount)return this;for(var e=0,t=this._chainedTweensCount;e<t;e++)this[I+e]=arguments[e];return this}},{key:"repeat",value:function(e){return this._repeat=this._duration?"function"==typeof e?e(this._repeat):e:0,this._r=this._repeat,this._isFinite=isFinite(e),this}},{key:"reverseDelay",value:function(e){return this._reverseDelayTime="function"==typeof e?e(this._reverseDelayTime):e,this}},{key:"yoyo",value:function(e,t){return this._yoyo="function"==typeof e?e(this._yoyo):null===e?this._yoyo:e,e||(this._reversed=!1),this._easingReverse=t||null,this}},{key:"easing",value:function(e){return this._easingFunction=e,this}},{key:"interpolation",value:function(e){return"function"==typeof e&&(this._interpolationFunction=e),this}},{key:"reassignValues",value:function(e){var t=this._valuesStart,n=this.object,i=this._delayTime;for(var o in this._isPlaying=!0,this._startTime=void 0!==e?e:f(),this._startTime+=i,this._reversed=!1,r(this),t){var a=t[o];n[o]=a}return this}},{key:"update",value:function(t,n,r){var i,s,u,c=this._onStartCallbackFired,l=this._easingFunction,h=this._interpolationFunction,d=this._easingReverse,p=this._repeat,y=this._delayTime,m=this._reverseDelayTime,v=this._yoyo,g=this._reversed,_=this._startTime,w=this._prevTime,E=this._duration,M=this._valuesStart,O=this._valuesEnd,S=this.object,j=this._isFinite,P=this._isPlaying,k=this.__render,L=this._chainedTweensCount,D=0;if(E){var z=(t=void 0!==t?t:f())-w;if(this._prevTime=t,250<z&&o()&&a()&&(t-=z-R),!P||t<_&&!r)return!0;i=1<(i=(t-_)/E)?1:i,i=g?1-i:i}else i=1,p=0;if(c||(this._rendered||(this.render(),this._rendered=!0),this.emit(N,S),this._onStartCallbackFired=!0),s=g&&d||l,!S)return!0;for(u in O){var A=M[u];if(null!=A||T[u]&&T[u].update){var x=O[u],C=s[u]?s[u](i):("function"==typeof s?s:he)(i),q=h[u]?h[u]:"function"==typeof h?h:se.Linear;"number"==typeof x?S[u]=A+(x-A)*C:!Array.isArray(x)||x.isString||Array.isArray(A)?x&&x.update?x.update(C):"function"==typeof x?S[u]=x(C):"string"==typeof x&&"number"==typeof A?S[u]=A+parseFloat(x[0]+x.substr(2))*C:ee(u,S,M,O,C,i):S[u]=q(x,C,S[u]),T[u]&&T[u].update&&T[u].update.call(this,S[u],A,x,C,i,u),D++}}if(!D)return b(this),!1;if(k&&e.Renderer&&e.Renderer.update&&e.Renderer.update.call(this,S,i),this.emit(F,S,i,t),1===i||g&&0===i){if(0<p&&0<E){if(j&&this._repeat--,v)this._reversed=!g;else for(u in O){var H=O[u];"string"==typeof H&&"number"==typeof M[u]&&(M[u]+=parseFloat(H[0]+H.substr(2)))}return this.emit(v&&!g?G:V,S),this._startTime=g&&m?t-m:t+y,!0}if(n||(this._isPlaying=!1,b(this),fe--),this.emit(B,S),this._repeat=this._r,L)for(var W=0;W<L;W++)this[I+W].start(t+E);return!1}return!0}}]),e}(),pe=function(){function e(){O(this,e),this.totalTime=0,this.labels=[],this.offsets=[]}return j(e,[{key:"parseLabel",value:function(e,t){var n=this.offsets,r=this.labels,i=r.indexOf(e);if("string"==typeof e&&-1!==e.indexOf("=")&&!t&&-1===i){var o=e.substr(e.indexOf("=")-1,2),a=e.split(o);t=2===a.length?o+a[1]:null,e=a[0],i=r.indexOf(e)}if(-1!==i&&e){var s=n[i]||0;if("number"==typeof t)s=t;else if("string"==typeof t&&-1!==t.indexOf("=")){var u=t.charAt(0);t=Number(t.substr(2)),"+"===u||"-"===u?s+=parseFloat(u+t):"*"===u?s*=t:"/"===u?s/=t:"%"===u&&(s*=t/100)}return s}return"number"==typeof t?t:0}},{key:"addLabel",value:function(e,t){return this.labels.push(e),this.offsets.push(this.parseLabel(e,t)),this}},{key:"setLabel",value:function(e,t){var n=this.labels.indexOf(e);return-1!==n&&this.offsets.splice(n,1,this.parseLabel(e,t)),this}},{key:"eraseLabel",value:function(e){var t=this.labels.indexOf(e);return-1!==t&&(this.labels.splice(t,1),this.offsets.splice(t,1)),this}}]),e}(),ye=0,me=function(){function e(t){var n;return O(this,e),(n=A(this,L(e).call(this)))._duration=0,n._startTime=t&&void 0!==t.startTime?t.startTime:f(),n._tweens=[],n.elapsed=0,n._id=ye++,n._defaultParams=t,n.position=new pe,n.position.addLabel("afterLast",n._duration),n.position.addLabel("afterInit",n._startTime),n._onStartCallbackFired=!1,A(n,z(n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(e,de),j(e,[{key:"mapTotal",value:function(e){return e.call(this,this._tweens),this}},{key:"timingOrder",value:function(e){var t=e(this._tweens.map((function(e){return e._startTime})));return this._tweens.map((function(e,n){e._startTime=t[n]})),this}},{key:"getTiming",value:function(e,t,n,r){var i=3<arguments.length&&void 0!==r?r:0;if("reverse"===e){var o=n.stagger,a=(o||0)*(t.length-1);return t.map((function(e,t){return a-(o||0)*t+i}))}if("async"===e)return t.map((function(e){return i}));if("sequence"===e||"delayed"===e){var s=n.stagger;return s=s||(n.duration||1e3)/(t.length-1),t.map((function(e,t){return s*t+i}))}if("oneByOne"===e)return t.map((function(e){return n.duration}));if("shuffle"===e){var u=n.stagger;return function(e){var t,n,r;for(r=e.length;r;--r)t=Math.floor(Math.random()*r),n=e[r-1],e[r-1]=e[t],e[t]=n;return e}(t.map((function(e,t){return(u||0)*t+i})))}var c=n.stagger;return t.map((function(e,t){return(c||0)*t+i}))}},{key:"fromTo",value:function(e,t,n,r){if((e=le(e,!0,!0))&&e.length){this._defaultParams&&(r=r?k({},this._defaultParams,{},r):this._defaultParams);for(var i,o=r.label,a="number"==typeof o?o:this.position.parseLabel(void 0!==o?o:"afterLast",null),s=this.getTiming(r.mode,e,r,a),u=0,c=e.length;u<c;u++)i=e[u],this.add(de.fromTo(i,"function"==typeof t?t(u,e.length):"object"===M(t)&&t?k({},t):null,"function"==typeof n?n(u,e.length):n,"function"==typeof r?r(u,e.length):r),s[u])}return this.start()}},{key:"from",value:function(e,t,n){return this.fromTo(e,t,null,n)}},{key:"to",value:function(e,t,n){return this.fromTo(e,null,t,n)}},{key:"addLabel",value:function(e,t){return this.position.addLabel(e,t),this}},{key:"map",value:function(e){for(var t=0,n=this._tweens.length;t<n;t++){var r=this._tweens[t];e(r,t),this._duration=Math.max(this._duration,r._duration+r._startTime)}return this}},{key:"add",value:function(e,t){var n=this;if(Array.isArray(e))return e.map((function(e){n.add(e,t)})),this;"object"!==M(e)||e instanceof de||(e=new de(e.from).to(e.to,e));var r=this._defaultParams,i=this._duration;if(r)for(var o in r)"function"==typeof e[o]&&e[o](r[o]);var a="number"==typeof t?t:this.position.parseLabel(void 0!==t?t:"afterLast",null);return e._startTime=Math.max(this._startTime,e._delayTime,a),e._delayTime=a,e._isPlaying=!0,this._duration=Math.max(i,Math.max(e._startTime+e._delayTime,e._duration)),this._tweens.push(e),this.position.setLabel("afterLast",this._duration),this}},{key:"restart",value:function(){return this._startTime+=f(),r(this),this.emit(q)}},{key:"easing",value:function(e){return this.map((function(t){return t.easing(e)}))}},{key:"interpolation",value:function(e){return this.map((function(t){return t.interpolation(e)}))}},{key:"update",value:function(e){var t,n=this._tweens,r=this._duration,i=this._reverseDelayTime,s=this._startTime,u=this._reversed,c=this._yoyo,l=this._repeat,h=this._isFinite,d=this._isPlaying,p=this._prevTime,y=this._onStartCallbackFired,m=(e=void 0!==e?e:f())-p;if(this._prevTime=e,250<m&&o()&&a()&&(e-=m-R),!d||e<s)return!0;t=1<(t=(e-s)/r)?1:t,t=u?1-t:t,this.elapsed=t,y||(this.emit(N),this._onStartCallbackFired=!0);for(var v=e-s,g=u?r-v:v,_=0;_<n.length;)n[_].update(g),_++;if(this.emit(F,t,v),1===t||u&&0===t){if(l){for(h&&this._repeat--,this.emit(u?G:V),c&&(this._reversed=!u,this.timingOrder((function(e){return e.reverse()}))),this._startTime=u&&i?e+i:e,_=0;_<n.length;)n[_].reassignValues(e),_++;return!0}return this.emit(B),this._repeat=this._r,b(this),this._isPlaying=!1}return!0}},{key:"progress",value:function(e){return void 0!==e?this.update(e*this._duration):this.elapsed}}]),e}();t.Easing=E,t.FrameThrottle=function(e){g=1.05*(0<arguments.length&&void 0!==e?e:120)},t.Interpolation=se,t.Interpolator=function(e,t){var n=Array.isArray(e)&&!e.isString,r="string"==typeof e?e:n?e.slice():k({},e);if(n)for(var i=0,o=e.length;i<o;i++)e[i]===t[i]&&"number"==typeof e[i]&&"number"!=typeof t[i]||Z(i,r,e,t);else if("object"===M(e))for(var a in e)e[a]===t[a]&&"number"==typeof e[a]&&"number"!=typeof t[a]||Z(a,r,e,t);else if("string"==typeof e){e=K(e),t=K(t);for(var s=1;s<e.length;)e[s]===t[s]&&"string"==typeof e[s-1]?(e.splice(s-1,2,e[s-1]+e[s]),t.splice(s-1,2,t[s-1]+t[s])):s++}return function(i){if(n)for(var o=0,a=e.length;o<a;o++)ee(o,r,e,t,i);else if("object"===M(r))for(var s in e)ee(s,r,e,t,i);else"string"==typeof r&&(r=ee(0,0,e,t,i,i,!0));return r}},t.Plugins=T,t.Selector=le,t.Timeline=me,t.ToggleLagSmoothing=function(e){_=!(0<arguments.length&&void 0!==e)||e},t.Tween=de,t.add=r,t.autoPlay=function(e){p=e},t.get=i,t.getAll=function(){return h},t.has=function(e){return null!==i(e)},t.isRunning=o,t.now=f,t.onRequestTick=function(e){y.push(e)},t.onTick=function(e){return h.push({update:e})},t.remove=b,t.removeAll=function(){h.length=0,l(s),d=!1},t.update=w,t.utils=ae,Object.defineProperty(t,"__esModule",{value:!0})}(t)}).call(this,n(2),n(3))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var u,c=[],l=!1,f=-1;function h(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&d())}function d(){if(!l){var e=s(h);l=!0;for(var t=c.length;t;){for(u=c,c=[];++f<t;)u&&u[f].run();f=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function y(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||l||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=y,i.addListener=y,i.once=y,i.off=y,i.removeListener=y,i.removeAllListeners=y,i.emit=y,i.prependListener=y,i.prependOnceListener=y,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";n.r(t);var r=n(0);function i(e,t,n,r){return{x:e/n*2-1,y:-t/r*2+1}}function o(e){var t=e.target.getBoundingClientRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var i=f(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(n,e);var t=u(n);function n(e,o,a){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),h(l(s=t.call(this)),"activate",(function(){s.domElement.addEventListener("mousemove",s.onDocumentMouseMove,!1),s.domElement.addEventListener("mousedown",s.onDocumentMouseDown,!1),s.domElement.addEventListener("mouseup",s.onDocumentMouseCancel,!1),s.domElement.addEventListener("mouseleave",s.onDocumentMouseCancel,!1),s.domElement.addEventListener("touchmove",s.onDocumentTouchMove,!1),s.domElement.addEventListener("touchstart",s.onDocumentTouchStart,!1),s.domElement.addEventListener("touchend",s.onDocumentTouchEnd,!1)})),h(l(s),"deactivate",(function(){s.domElement.removeEventListener("mousemove",s.onDocumentMouseMove,!1),s.domElement.removeEventListener("mousedown",s.onDocumentMouseDown,!1),s.domElement.removeEventListener("mouseup",s.onDocumentMouseCancel,!1),s.domElement.removeEventListener("mouseleave",s.onDocumentMouseCancel,!1),s.domElement.removeEventListener("touchmove",s.onDocumentTouchMove,!1),s.domElement.removeEventListener("touchstart",s.onDocumentTouchStart,!1),s.domElement.removeEventListener("touchend",s.onDocumentTouchEnd,!1)})),h(l(s),"onDocumentMouseMove",(function(e){if(e.preventDefault(),s._handleCursorMove(e.clientX,e.clientY),!s.isDragging){s.raycaster.setFromCamera(s.mouse,s.camera);var t=s.raycaster.intersectObjects(s.object.children);if(t.length>0){var n=t[0].object;s.plane.setFromNormalAndCoplanarPoint(s.camera.getWorldDirection(s.plane.normal),n.parent.position),s.hovered!==n&&(s.dispatchEvent({type:"hoveron",object:n}),s.domElement.style.cursor="pointer",s.hovered=n)}else null!==s.hovered&&(s.dispatchEvent({type:"hoveroff",object:s.hovered}),s.domElement.style.cursor="auto",s.hovered=null)}})),h(l(s),"onDocumentMouseDown",(function(e){e.preventDefault(),s.raycaster.setFromCamera(s.mouse,s.camera);var t=s.raycaster.intersectObjects(s.object.children);t.length>0&&(s.selected=t[0].object,s.raycaster.ray.intersectPlane(s.plane,s.intersection)&&s.offset.copy(s.intersection).sub(s.selected.parent.position),s.domElement.style.cursor="move",s.isDragging=!0,s.dispatchEvent({type:"dragstart",object:s.selected}))})),h(l(s),"onDocumentMouseCancel",(function(e){e.preventDefault(),s.selected&&(s.dispatchEvent({type:"dragend",object:s.selected}),s.selected=null),s.isDragging=!1,s.domElement.style.cursor="auto"})),h(l(s),"onDocumentTouchMove",(function(e){e.preventDefault(),e=e.changedTouches[0],s._handleCursorMove(e.clientX,e.clientY)})),h(l(s),"onDocumentTouchStart",(function(e){e.preventDefault(),e=e.changedTouches[0];var t=s.domElement.getBoundingClientRect(),n=i(e.clientX-t.left,e.clientY-t.top,t.width,t.height);s.mouse.x=n.x,s.mouse.y=n.y,s.raycaster.setFromCamera(s.mouse,s.camera);var r=s.raycaster.intersectObjects(s.object.children);r.length>0&&(s.selected=r[0].object,s.plane.setFromNormalAndCoplanarPoint(s.camera.getWorldDirection(s.plane.normal),s.selected.parent.position),s.raycaster.ray.intersectPlane(s.plane,s.intersection)&&s.offset.copy(s.intersection).sub(s.selected.parent.position),s.domElement.style.cursor="move",s.isDragging=!0,s.dispatchEvent({type:"dragstart",object:s.selected}))})),h(l(s),"onDocumentTouchEnd",(function(e){e.preventDefault(),s.selected&&(s.dispatchEvent({type:"dragend",object:s.selected}),s.selected=null),s.isDragging=!1,s.domElement.style.cursor="auto"})),h(l(s),"_handleCursorMove",(function(e,t){var n=s.domElement.getBoundingClientRect(),r=i(e-n.left,t-n.top,n.width,n.height);if(s.mouse.x=r.x,s.mouse.y=r.y,s.raycaster.setFromCamera(s.mouse,s.camera),s.selected&&s.enabled){if(s.raycaster.ray.intersectPlane(s.plane,s.intersection)){var o=s.intersection.sub(s.offset),a=(n.width+n.left)/2,u=(n.height+n.top)/2,c=Math.abs(o.x),l=Math.abs(o.y);c>.4*a&&(o.x=o.x/c*.4*a),l>.4*u&&(o.y=o.y/l*.4*u),s.selected.parent.position.copy(o)}s.dispatchEvent({type:"drag",object:s.selected})}})),s.object=e,s.camera=o,s.domElement=a,s.plane=new r.Plane,s.raycaster=new r.Raycaster,s.mouse=new r.Vector2,s.offset=new r.Vector3,s.intersection=new r.Vector3,s.selected=null,s.hovered=null,s.isDragging=!1,s.enabled=!0,s.activate(),s}return n}(r.EventDispatcher),p=15647149,y=2892331,m=16756064,v=14900586,g=16579836,_=591878,b=6139362,w=5812956,T="[THREE Glasses]",E="[THREE Avatar]",M="[THREE Scene]",O=n(1);function S(){}function j(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k=function e(){var t=this,n=this,i=this,o=this,a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),P(this,"act",j((function(){if(n.isDizzy)n._actions.unshift(n.stopDizzy);else if(n._actions.length<5){var e=Math.random()>.4?n.blink:n.confuse;n._actions.push(e)}return t=function(){if(n._actions.length>0)return function(e){if(e&&e.then)return e.then(S)}(function(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}((function(){return function(e,t){if(!t)return e&&e.then?e.then(S):Promise.resolve()}(n._actions.shift().call())}),(function(e){console.error(e.message)})))},r=function(){n.act()},(i=t())&&i.then?i.then(r):r(i);var t,r,i}))),P(this,"blink",j((function(){var e=new O.Tween(i.normalEyes.scale);return new Promise((function(t){e.to({y:.01},70).repeat(1).yoyo(!0).on("update",(function(){i.isDizzy?(i.iris.scale.y=1,t()):i.iris.scale.y=i.normalEyes.scale.y})).on("complete",(function(){setTimeout(t,2e3+1e3*Math.random())})).start()})).then((function(){return e.stop()}))}))),P(this,"confuse",j((function(){var e={mouthX:1,mouthY:1,eyeY:1},t=new O.Tween(e);return new Promise((function(n){t.to({mouthX:2,mouthY:.3,eyeY:.35},100).repeat(1).delay(2e3+2e3*Math.random()).yoyo(!0).on("update",(function(){o.isDizzy?(o.normalEyes.scale.y=1,o.iris.scale.y=1,n()):(o.normalEyes.scale.y=e.eyeY,o.iris.scale.y=e.eyeY,o.mouth.scale.x=e.mouthX,o.mouth.scale.y=e.mouthY)})).on("complete",(function(){setTimeout(n,2e3+1e3*Math.random())})).start()})).then((function(){return t.stop()}))}))),P(this,"lookAt",(function(e){var n=t._constrainHeadRotation(e);t.oldTargetLookPos||(t.oldTargetLookPos=new r.Vector3),t.newTargetLookPos=n.clone(),t.lookPos=t.oldTargetLookPos.clone().add(t.newTargetLookPos.sub(t.oldTargetLookPos).multiplyScalar(.15)),t.mesh.lookAt(t.lookPos),t.oldTargetLookPos=t.lookPos})),P(this,"isWearingGlasses",(function(){return!!t.mesh.getObjectByName(T)})),P(this,"wearGlasses",(function(e){e instanceof r.Object3D&&e.name===T&&(t.mesh.add(e),e.position.set(0,5,32))})),P(this,"prepareToBeDizzy",(function(){t._dizzyCircle||(t._dizzyCircle=new r.CircleGeometry(35,100),t._dizzyCircle.applyMatrix4((new r.Matrix4).makeTranslation(0,-50,-100)),t._dizzyCircle.applyMatrix4((new r.Matrix4).makeRotationX(Math.PI))),t._dizzyFrame=1,t.isDizzy=!0,t._toggleDizzyFace(t.isDizzy)})),P(this,"dizzy",(function(){t.isDizzy&&t._dizzyCircle&&(t._dizzyFrame>100&&(t._dizzyFrame=1),t.mesh.lookAt(t._dizzyCircle.vertices[t._dizzyFrame++]))})),P(this,"stopDizzy",j((function(){return new Promise((function(e){setTimeout((function(){a.isDizzy=!1,a._dizzyCircle=null,a._toggleDizzyFace(a.isDizzy),e()}),6e3)}))}))),P(this,"_toggleDizzyFace",(function(e){t.dizzyEyes.visible=e,t.normalEyes.visible=!e,t.iris.visible=!e;var n=e?.7:1,r=e?2:1;t.mouth.scale.set(n,r,1)})),P(this,"_constrainHeadRotation",(function(e){var t=Math.PI/5;return e.x>t?e.x=t:e.x<-t&&(e.x=-t),e.y>t?e.y=t:e.y<-t&&(e.y=-t),e})),P(this,"_createHead",(function(){var e=new r.BoxBufferGeometry(60,56,54),n=new r.MeshPhongMaterial({color:p,flatShading:r.FlatShading});t.head=new r.Mesh(e,n),t.head.receiveShadow=!0,t.mesh.add(t.head)})),P(this,"_createNormalEyes",(function(){var e=new r.BoxBufferGeometry(20,20,1),n=new r.MeshLambertMaterial({color:g}),i=new r.Mesh(e,n);i.position.x=18;var o=i.clone();o.position.x=-18,t.normalEyes=new r.Object3D,t.normalEyes.position.set(0,6,28),t.normalEyes.add(i),t.normalEyes.add(o),t.mesh.add(t.normalEyes)})),P(this,"_createDizzyEyes",(function(){var e=new r.PlaneBufferGeometry(14,3,1,1),n=new r.MeshLambertMaterial({color:_}),i=new r.Mesh(e,n),o=i.clone(),a=i.clone(),s=i.clone();i.rotation.z=Math.PI/4,o.rotation.z=-Math.PI/4,a.rotation.z=Math.PI/4,s.rotation.z=-Math.PI/4;var u=new r.Object3D,c=u.clone();u.add(i),u.add(o),c.add(a),c.add(s),u.position.set(17,0,0),c.position.set(-17,0,0),t.dizzyEyes=new r.Object3D,t.dizzyEyes.position.set(0,6,28),t.dizzyEyes.add(u),t.dizzyEyes.add(c),t.dizzyEyes.visible=!1,t.mesh.add(t.dizzyEyes)})),P(this,"_createIris",(function(){var e=new r.BoxBufferGeometry(5,5,1),n=new r.MeshLambertMaterial({color:_}),i=new r.Mesh(e,n);i.position.set(15,0,0);var o=i.clone();o.position.set(-15,0,0),t.iris=new r.Object3D,t.iris.position.set(0,6,30),t.iris.add(i),t.iris.add(o),t.mesh.add(t.iris)})),P(this,"_createNose",(function(){var e=new r.Geometry;e.vertices=[new r.Vector3(0,0,10),new r.Vector3(-7,0,0),new r.Vector3(0,18,0),new r.Vector3(7,0,0)],e.faces=[new r.Face3(0,1,3),new r.Face3(2,1,0),new r.Face3(0,3,2)];var n=new r.MeshPhongMaterial({color:m,flatShading:r.FlatShading});t.nose=new r.Mesh(e,n),t.nose.position.set(0,-8,26),t.nose.castShadow=!0,t.nose.receiveShadow=!0,t.mesh.add(t.nose)})),P(this,"_createMouth",(function(){var e=new r.PlaneBufferGeometry(6,4,1,1),n=new r.MeshLambertMaterial({color:v});t.mouth=new r.Mesh(e,n),t.mouth.position.set(0,-20,28),t.mesh.add(t.mouth)})),P(this,"_createEars",(function(){var e=new r.BoxBufferGeometry(4,18,12),n=new r.MeshPhongMaterial({color:p,flatShading:r.FlatShading}),i=new r.Mesh(e,n);i.position.set(33,0,0),i.rotation.y=-Math.PI/6,i.castShadow=!0,i.receiveShadow=!0;var o=i.clone();o.position.set(-33,0,0),o.rotation.y=Math.PI/6,o.castShadow=!0,o.receiveShadow=!0,t.ears=new r.Object3D,t.ears.add(i),t.ears.add(o),t.ears.position.set(0,5,-5),t.mesh.add(t.ears)})),P(this,"_createHair",(function(){var e=new r.BoxBufferGeometry(16,18,15),n=new r.MeshLambertMaterial({color:y}),i=new r.Mesh(e,n);i.geometry.applyMatrix4((new r.Matrix4).makeTranslation(0,9,0)),t.hairs=new r.Object3D,t.hairTop=new r.Object3D;for(var o=Math.PI/2,a=0;a<16;a++){var s=i.clone(),u=a%4,c=Math.floor(a/4);s.position.set(16*c-24,0,15*u-22),o=1===c?Math.PI/3:2===c?Math.PI/2.5:Math.PI/2,s.scale.y=1*Math.cos(u/3)/Math.sin(o),t.hairTop.add(s)}t.hairTop.position.y+=28,t.hairs.add(t.hairTop),t.hairSide=new r.Object3D;var l=(new r.Matrix4).set(1,0,0,0,0,1,.2,0,0,0,1,0,0,0,0,1),f=new r.BoxBufferGeometry(4,36,32),h=new r.Mesh(f.applyMatrix4(l),n),d=h.clone();h.position.set(-30,0,0),d.position.set(30,0,0),t.hairSide.add(d),t.hairSide.add(h),t.hairSide.position.set(0,18,-10),t.hairs.add(t.hairSide);var p=new r.BoxBufferGeometry(64,62,10);t.hairBack=new r.Mesh(p,n),t.hairBack.position.set(0,15,-25),t.hairs.add(t.hairBack),t.hairs.traverse((function(e){e instanceof r.Mesh&&(e.castShadow=!0,e.receiveShadow=!0)})),t.mesh.add(t.hairs)})),this.mesh=new r.Object3D,this.mesh.name=E,this.isDizzy=!1,this.isLookingAround=!0,this._isWearingGlasses=!1,this._actions=[],this._createHead(),this._createNormalEyes(),this._createDizzyEyes(),this._createIris(),this._createNose(),this._createMouth(),this._createEars(),this._createHair(),Object(O.autoPlay)(!0)};var L=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mesh=new r.Object3D,this.mesh.name=T;var t=new r.TorusBufferGeometry(16,2,16,4),n=new r.MeshPhongMaterial({color:b,flatShading:!0}),i=new r.Mesh(t,n);i.rotation.z=Math.PI/4;var o=i.clone();i.position.x=18,o.position.x=-18,this.mesh.add(i),this.mesh.add(o);var a=new r.TorusBufferGeometry(10,1.2,16,4,Math.PI/2),s=new r.Mesh(a,n);s.rotation.z=Math.PI/4,this.mesh.add(s);var u=new r.BoxBufferGeometry(3,3,40),c=new r.MeshPhongMaterial({color:b}),l=new r.Mesh(u,c),f=l.clone();l.position.set(32,10,-19),f.position.set(-32,10,-19),this.mesh.add(l),this.mesh.add(f),this.mesh.traverse((function(e){e instanceof r.Mesh&&(e.castShadow=!0)}));var h=new r.PlaneBufferGeometry(24,24,1,1),d=new r.MeshPhongMaterial({transparent:!0,color:w,opacity:.1}),p=new r.Mesh(h,d),y=p.clone();p.position.x=18,y.position.x=-18,this.mesh.add(p),this.mesh.add(y)};function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var i=I(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return x(this,n)}}function x(e,t){return!t||"object"!==D(t)&&"function"!=typeof t?R(e):t}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var F=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(n,e);var t=A(n);function n(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),C(R(e=t.call(this)),"createScene",(function(){var t=e.deviceWidth/e.deviceHeight;e.scene=new r.Scene,e.camera=new r.PerspectiveCamera(60,t,.1,2e3),e.camera.position.z=420,e.scene.add(e.camera),e.renderer=new r.WebGLRenderer({alpha:!0,antialias:!0}),e.renderer.setSize(e.deviceWidth,e.deviceHeight),e.renderer.shadowMap.enabled=!0,e.container.appendChild(e.renderer.domElement),e.container.addEventListener("mousemove",e._handleMouseMove,!1),e.container.addEventListener("mouseover",e._handleMouseEnterAndOut,!1),e.container.addEventListener("mouseout",e._handleMouseEnterAndOut,!1),e.container.addEventListener("touchmove",e._handleTouchMove,!1),e.container.addEventListener("touchstart",e._handleTouchStartAndEnd,!1),e.container.addEventListener("touchend",e._handleTouchStartAndEnd,!1),window.addEventListener("resize",e._handleWindowResize,!1)})),C(R(e),"createLight",(function(){var t=new r.HemisphereLight(15658734,11184810,.8),n=new r.DirectionalLight(16777215,.4);n.position.set(150,350,350),n.castShadow=!0,n.shadow.camera.left=-200,n.shadow.camera.right=200,n.shadow.camera.top=200,n.shadow.camera.bottom=-200,n.shadow.camera.near=1,n.shadow.camera.far=1e3,n.shadow.mapSize.width=2048,n.shadow.mapSize.height=2048,e.scene.add(t),e.scene.add(n)})),C(R(e),"createAvatar",(function(){e.avatar=new k,e.scene.add(e.avatar.mesh),e.avatar.act()})),C(R(e),"createGlasses",(function(){e.glasses=new L,e.scene.add(e.glasses.mesh),e.glasses.mesh.position.set(0,-100,80),e.dragControls=new d(e.glasses.mesh,e.camera,e.renderer.domElement),e.dragControls.addEventListener("dragstart",(function(t){e.scene.add(e.glasses.mesh),e.glasses.mesh.position.z=80,e.dispatchEvent({type:"glassesoff"})})),e.dragControls.addEventListener("drag",(function(t){e.glasses.mesh.position.z=80})),e.dragControls.addEventListener("dragend",(function(t){var n=e.glasses.mesh.position;Math.abs(n.x)<20&&Math.abs(n.y)<=20&&(e.avatar.wearGlasses(e.glasses.mesh),!e.avatar.isDizzy&&e.avatar.isWearingGlasses()&&e.dispatchEvent({type:"glasseson"}))}))})),C(R(e),"toggleAvatarLookAround",(function(t){t?null===e._lookAroundInterval&&(e._lookAroundInterval=setInterval((function(){e.mouseVector.set((Math.random()>.5?.5:-.5)*Math.random(),(Math.random()>.5?.3:-.4)*Math.random(),.5)}),5e3)):null!==e._lookAroundInterval&&(clearInterval(e._lookAroundInterval),e._lookAroundInterval=null)})),C(R(e),"loop",(function(){e.toggleAvatarLookAround(e.avatar.isLookingAround),e.avatar.isDizzy?(e.avatar.dizzy(),e.mouseVector.set(0,0,.5)):(e.avatar.isWearingGlasses()&&e.dispatchEvent({type:"glasseson"}),e.avatar.lookAt(e.mouseVector)),e.animate()})),C(R(e),"animate",(function(){window.requestAnimationFrame(e.loop),e.renderer.render(e.scene,e.camera)})),C(R(e),"_handleMouseMove",(function(t){t.preventDefault();var n=o(t);e._updateMouseVector(n.x,n.y)})),C(R(e),"_handleMouseEnterAndOut",(function(t){t.preventDefault(),"mouseover"===t.type?e.avatar.isLookingAround=!1:"mouseout"===t.type&&(e.avatar.isLookingAround=!0)})),C(R(e),"_handleTouchMove",(function(t){t.preventDefault();var n=o(t=t.changedTouches[0]);e._updateMouseVector(n.x,n.y)})),C(R(e),"_handleTouchStartAndEnd",(function(t){t.preventDefault(),"touchstart"===t.type?e.avatar.isLookingAround=!1:"touchend"===t.type&&(e.avatar.isLookingAround=!0)})),C(R(e),"_handleWindowResize",(function(){e.deviceWidth=e.container.clientWidth,e.deviceHeight=e.container.clientHeight,e.camera.aspect=e.deviceWidth/e.deviceHeight,e.camera.updateProjectionMatrix(),e.renderer.setSize(e.deviceWidth,e.deviceHeight)})),C(R(e),"_updateMouseVector",(function(t,n){var r=i(t,n,e.deviceWidth,e.deviceHeight);e.mouseVector.setX(r.x),e.mouseVector.setY(r.y)})),C(R(e),"_trackMouseSpeed",(function(){var t,n=-1,r=-1,i=0,o=!1;e.container.addEventListener("mousemove",(function(e){e.preventDefault(),o=!!e.touches,a(e.clientX,e.clientY)}),!1),e.container.addEventListener("touchmove",(function(e){e.preventDefault(),o=!!e.touches,e=e.changedTouches[0],a(e.clientX,e.clientY)}),!1);var a=function(t,o){var a,s;n>-1&&!e.avatar.isDizzy&&(i+=(a={x:t,y:o},s={x:n,y:r},Math.sqrt(Math.pow(a.x-s.x,2)+Math.pow(a.y-s.y,2)))),n=t,r=o};setTimeout((function n(){var r=Date.now();if(t&&t!==r){var a=o?3e3:4e3;!e.avatar.isDizzy&&i>a&&e.avatar.prepareToBeDizzy(),i=0}t=r,setTimeout(n,1200)}),1200)})),e.name=M,e.container=document.querySelector(".world"),e.deviceWidth=e.container.clientWidth,e.deviceHeight=e.container.clientHeight,e.mouseVector=new r.Vector3(0,0,.5),e._lookAroundInterval=null,e.createScene(),e.createLight(),e.createAvatar(),e.createGlasses(),e._trackMouseSpeed(),e}return n}(r.EventDispatcher);document.addEventListener("DOMContentLoaded",(function(){var e=new F,t=document.querySelector(".intro"),n=document.querySelector(".tooltips");!function(e,t){var n=0,r="",i=!1;!function o(){var a=t[n],s=250-100*Math.random();r=i?a.substring(0,r.length-1):a.substring(0,r.length+1),e.innerHTML="<span>".concat(r,"</span>"),i&&(s/=2),i||r!==a?i&&""===r&&(i=!1,n=n===t.length-1?0:n+1,s=500):(i=!0,s=1500),setTimeout((function(){o()}),s)}()}(document.querySelector(".hobby"),["watching movies.","drawing.","football.","playing RPG games.","coding!"]),e.addEventListener("glassesoff",(function(e){t.classList.add("blur")}),!1),e.addEventListener("glasseson",(function(e){t.classList.remove("blur")}),!1),n.addEventListener("touchstart",(function(e){e.preventDefault(),n.classList.contains("hover")?n.classList.remove("hover"):n.classList.add("hover")}),!1),document.addEventListener("touchstart",(function(e){e.preventDefault(),e.target!==n&&n.classList.contains("hover")&&n.classList.remove("hover")}),!1),e.loop()}),!1)}]);
//# sourceMappingURL=main.de54c27c5cc4885beb37.js.map